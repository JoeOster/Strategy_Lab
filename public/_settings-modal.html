<div id="settings-modal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <h2>Settings</h2>

    <div class="settings-tabs">
      <button class="settings-tab active" data-tab="general-settings-panel">
        General
      </button>
      <button class="settings-tab" data-tab="appearance-settings-panel">
        Appearance
      </button>
      <button class="settings-tab" data-tab="data-management-settings-panel">
        Data Management
      </button>
      <button class="settings-tab" data-tab="user-management-settings-panel">
        User Management
      </button>
    </div>

    <div id="general-settings-panel" class="settings-panel active">
      <h3>General</h3>
      <form id="general-settings-form">
        <label for="family-name">App Title:</label>
        <input type="text" id="family-name" name="family-name" />
        <label for="take-profit-percent">Default Take Profit %:</label>
        <input
          type="number"
          id="take-profit-percent"
          name="take-profit-percent"
        />
        <label for="stop-loss-percent">Default Stop Loss %:</label>
        <input
          type="number"
          id="stop-loss-percent"
          name="stop-loss-percent"
        />
        <label for="notification-cooldown">Notification Cooldown (Min):</label>
        <input
          type="number"
          id="notification-cooldown"
          name="notification-cooldown"
        />
      </form>
    </div>

    <div id="appearance-settings-panel" class="settings-panel">
      <h3>Appearance</h3>
      <form id="appearance-settings-form">
        <label for="theme-selector">Theme:</label>
        <select id="theme-selector" name="theme-selector"></select>
        <label for="font-selector">Font:</label>
        <select id="font-selector" name="font-selector"></select>
      </form>
    </div>

    <div id="data-management-settings-panel" class="settings-panel">
      <h3>Data Management</h3>
      <div class="settings-sub-tabs">
        <button class="settings-sub-tab active" data-sub-tab="sources-panel">
          Advice Sources
        </button>
        <button class="settings-sub-tab" data-sub-tab="exchanges-panel">
          Exchanges
        </button>
        <button class="settings-sub-tab" data-sub-tab="webapps-panel">
          Web Apps
        </button>
      </div>

      <div id="sources-panel" class="sub-panel active">
        <h4>Add New Advice Source</h4>
        <form id="add-new-source-form">
          <select id="new-source-type" name="type">
            <option value="" selected disabled>Select a type...</option>
            <option value="person">Person</option>
            <option value="group">Group</option>
            <option value="book">Book</option>
            <option value="website">Website</option>
          </select>
          <div id="new-source-fields-container" style="display: none">
            <div id="new-source-name-wrapper">
              <label for="new-source-name">Name:</label>
              <input type="text" id="new-source-name" name="name" required />
            </div>
            <div id="new-source-url-wrapper" style="display: none">
              <label for="new-source-url">URL:</label>
              <input type="url" id="new-source-url" name="url" />
            </div>
            <div id="new-source-description-wrapper">
              <label for="new-source-description">Description:</label>
              <textarea
                id="new-source-description"
                name="description"
              ></textarea>
            </div>
            <div id="new-source-image-path-wrapper">
              <label for="new-source-image-path">Image Path:</label>
              <input
                type="text"
                id="new-source-image-path"
                name="image_path"
              />
            </div>
            <div
              id="new-source-panel-person"
              class="source-type-panel"
              style="display: none"
            >
              <h5>Person Details</h5>
              <label for="new-source-contact-email">Email:</label>
              <input
                type="email"
                id="new-source-contact-email"
                name="person_email"
              />
              <label for="new-source-contact-phone">Phone:</label>
              <input
                type="tel"
                id="new-source-contact-phone"
                name="person_phone"
              />
              <label for="new-source-contact-app-type">Contact App:</label>
              <input
                type="text"
                id="new-source-contact-app-type"
                name="person_app_type"
              />
              <label for="new-source-contact-app-handle">App Handle:</label>
              <input
                type="text"
                id="new-source-contact-app-handle"
                name="person_app_handle"
              />
            </div>
            <div
              id="new-source-panel-group"
              class="source-type-panel"
              style="display: none"
            >
              <h5>Group Details</h5>
              <label for="new-source-group-person">Primary Contact:</label>
              <input
                type="text"
                id="new-source-group-person"
                name="group_primary_contact"
              />
              <label for="new-source-group-email">Contact Email:</label>
              <input
                type="email"
                id="new-source-group-email"
                name="group_email"
              />
              <label for="new-source-group-phone">Group Phone:</label>
              <input
                type="tel"
                id="new-source-group-phone"
                name="group_phone"
              />
              <label for="new-source-group-app-type">Group App:</label>
              <input
                type="text"
                id="new-source-group-app-type"
                name="group_app_type"
              />
              <label for="new-source-group-app-handle"
                >Group App Handle:</label
              >
              <input
                type="text"
                id="new-source-group-app-handle"
                name="group_app_handle"
              />
            </div>
            <div
              id="new-source-panel-book"
              class="source-type-panel"
              style="display: none"
            >
              <h5>Book Details</h5>
              <label for="new-source-book-author">Author:</label>
              <input
                type="text"
                id="new-source-book-author"
                name="book_author"
              />
              <label for="new-source-book-isbn">ISBN:</label>
              <input
                type="text"
                id="new-source-book-isbn"
                name="book_isbn"
              />
              <label for="new-source-book-websites">Book URL:</label>
              <input
                type="text"
                id="new-source-book-websites"
                name="book_websites"
              />
              <label for="new-source-book-pdfs"
                >PDFs (comma-separated):</label
              >
              <input
                type="text"
                id="new-source-book-pdfs"
                name="book_pdfs"
              />
            </div>
            <div
              id="new-source-panel-website"
              class="source-type-panel"
              style="display: none"
            >
              <h5>Website Details</h5>
              <label for="new-source-website-websites"
                >Relevant Links (comma-separated):</label
              >
              <input
                type="text"
                id="new-source-website-websites"
                name="website_websites"
              />
              <label for="new-source-website-pdfs"
                >Saved Docs (comma-separated):</label
              >
              <input
                type="text"
                id="new-source-website-pdfs"
                name="website_pdfs"
              />
            </div>
            <div class="form-actions">
              <button type="submit">Add Source</button>
              <button
                type="button"
                id="clear-new-source-btn"
                class="clear-btn"
              >
                Clear
              </button>
            </div>
          </div>
        </form>
        <hr />
        <h4>Advice Sources</h4>
        <div id="advice-source-list"></div>
      </div>

      <div id="exchanges-panel" class="sub-panel">
        <h4>Add New Exchange</h4>
        <form id="add-exchange-form">
          <label for="new-exchange-name">Name:</label>
          <input
            type="text"
            id="new-exchange-name"
            name="new-exchange-name"
            required
          />
          <div class="form-actions">
            <button type="submit" id="add-exchange-btn">Add Exchange</button>
            <button type="button" id="clear-exchange-btn" class="clear-btn">
              Clear
            </button>
          </div>
        </form>
        <hr />
        <h4>Exchanges</h4>
        <div id="exchange-list"></div>
      </div>

      <div id="webapps-panel" class="sub-panel">
        <h4>Add New Web App</h4>
        <form id="add-webapp-form">
          <label for="new-webapp-name">Name:</label>
          <input
            type="text"
            id="new-webapp-name"
            name="new-webapp-name"
            required
          />
          <div class="form-actions">
            <button type="submit" id="add-webapp-btn">Add Web App</button>
            <button type="button" id="clear-webapp-btn" class="clear-btn">
              Clear
            </button>
          </div>
        </form>
        <hr />
        <h4>Web Apps</h4>
        <div id="webapp-list"></div>
      </div>
    </div>

    <div id="user-management-settings-panel" class="settings-panel">
      <h3>User Management</h3>
      <div class="settings-sub-tabs">
        <button class="settings-sub-tab active" data-sub-tab="users-panel">
          Users
        </button>
        <button class="settings-sub-tab" data-sub-tab="subscriptions-panel">
          Subscriptions
        </button>
      </div>

      <div id="users-panel" class="sub-panel active">
        <h4>Add New Account Holder</h4>
        <form id="add-holder-form">
          <label for="new-holder-name">Name:</label>
          <input
            type="text"
            id="new-holder-name"
            name="new-holder-name"
            required
          />
          <div class="form-actions">
            <button type="submit" id="add-account-holder-btn">
              Add Holder
            </button>
            <button type="button" id="clear-holder-btn" class="clear-btn">
              Clear
            </button>
          </div>
        </form>
        <hr />
        <h4>Account Holders</h4>
        <div id="account-holder-list"></div>
      </div>

      <div id="subscriptions-panel" class="sub-panel">
        <h4 id="subscriptions-panel-title">Manage Subscriptions</h4>
        <div id="subscriptions-panel-list-container"></div>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" id="save-settings-button">Save All Settings</button>
    </div>
  </div>
</div>